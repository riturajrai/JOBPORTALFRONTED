import{c as g,r,j as e}from"./index-DcUxCDgn.js";import{a as h}from"./index-C88pvD_q.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],y=g("Pencil",f);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],j=g("Trash2",b),v=()=>{const[n,c]=r.useState([]),[m,i]=r.useState(!0),[d,l]=r.useState(""),[a,u]=r.useState(localStorage.getItem("user_id"));r.useEffect(()=>{(async()=>{var s,x;if(!a){i(!1),l("❌ User not logged in");return}try{console.log("Fetching jobs for User ID:",a);const o=await h.get(`http://localhost:5000/api/jobs/user/${a}`);c(o.data)}catch(o){console.error("API Error:",o),l(((x=(s=o.response)==null?void 0:s.data)==null?void 0:x.error)||"Failed to fetch jobs")}i(!1)})()},[a]),r.useEffect(()=>{const t=()=>{u(localStorage.getItem("user_id"))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const p=async t=>{if(window.confirm("Are you sure you want to delete this job?"))try{await h.delete(`http://localhost:5000/api/jobs/${t}`),c(n.filter(s=>s.id!==t))}catch(s){console.error("Failed to delete job:",s),l("Failed to delete job")}};return m?e.jsx("p",{className:"text-center text-lg font-semibold",children:"Loading..."}):d?e.jsx("p",{className:"text-center text-red-500",children:d}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-blue-600 mb-6",children:"🛠 Manage Your Jobs"}),n.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"You haven't posted any jobs yet."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(t=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border hover:shadow-2xl transition-all",children:[e.jsx("h3",{className:"text-xl font-bold",children:t.title}),e.jsxs("p",{className:"text-gray-600",children:[t.company," - ",t.location]}),e.jsxs("p",{className:"text-blue-600 font-semibold text-lg mt-2",children:["💰 ",t.salary]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 transition-all",children:[e.jsx(y,{className:"w-5 h-5"})," Edit"]}),e.jsxs("button",{onClick:()=>p(t.id),className:"bg-red-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-red-700 transition-all",children:[e.jsx(j,{className:"w-5 h-5"})," Delete"]})]})]},t.id))})]})};export{v as default};
