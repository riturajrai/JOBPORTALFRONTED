import{r as o,u as b,j as e,L as f}from"./index-DcUxCDgn.js";import{a as j}from"./index-C88pvD_q.js";const v=()=>{const[a,x]=o.useState({email:"",password:""}),[r,n]=o.useState(!1),[l,i]=o.useState(""),p=b(),d=t=>{x({...a,[t.target.name]:t.target.value}),i("")},h=async t=>{var c,u,m,g;t.preventDefault(),n(!0);try{const s=await j.post("http://localhost:5000/api/login",a);console.log("Login Response:",s.data),s.data.token&&s.data.user&&(console.log("User ID before storing:",s.data.user.user_id),localStorage.setItem("token",s.data.token),localStorage.setItem("user_id",s.data.user.user_id),console.log("Stored User ID:",localStorage.getItem("user_id")),alert("Login Successful!"),p("/"))}catch(s){console.error("Login Error:",((u=(c=s.response)==null?void 0:c.data)==null?void 0:u.error)||s.message),i(((g=(m=s.response)==null?void 0:m.data)==null?void 0:g.error)||"Login failed")}n(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Login"}),l&&e.jsx("p",{className:"text-center text-sm mb-4 text-red-500",children:l}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:d,placeholder:"Enter your email",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:d,placeholder:"Enter your password",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300"})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:r?"Logging in...":"Login"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",e.jsx(f,{to:"/signup",className:"text-blue-500 hover:underline",children:"Sign up"})]})]})})};export{v as default};
